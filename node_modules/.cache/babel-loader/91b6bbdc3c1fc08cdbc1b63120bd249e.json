{"ast":null,"code":"var _jsxFileName = \"/Users/charanguru/projects/spin-wheel/src/components/Spinner.js\",\n    _s2 = $RefreshSig$();\n\n/* eslint-disable no-unused-vars */\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useState } from 'react';\nimport { GoogleSpreadsheet } from \"google-spreadsheet\";\nimport wheelPin from \"../assets/pin.svg\"; // import spin from \"../assets/spin.svg\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Spinner = ({\n  items\n}) => {\n  _s2();\n\n  const [selectedItem, setSelectedItem] = useState(null);\n  const spinning = selectedItem !== null ? 'spinning' : '';\n  const [result, setResult] = useState(''); // Config variables\n\n  const SPREADSHEET_ID = process.env.REACT_APP_SPREADSHEET_ID;\n  const SHEET_ID = process.env.REACT_APP_SHEET_ID;\n  const CLIENT_EMAIL = 'fampay@fampay-305208.iam.gserviceaccount.com';\n  const PRIVATE_KEY = \"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC4O3f/gRC0au9k\\nRpx0DDaVh8MqlXqnIu34tBtCj+yoshPo93PqNIJXviCoLrXWtts6sTmb4uQDHk/h\\noMmW7eJxSHaZ2DO+kY6zhvVOvtwKSz6AVdN1tRhYBU9LqEJflH0h7l33yVvYpXJe\\nwdzAuKSxGzRf9OcblPtJrf/zmeJkR0MEnwYlJVsfWpDEO+UdGn/Zhd222+zjjip+\\nBKAbMKLB8TiD5pGcjYVqMBrXrnT8HTb+t0A1Jk31t/y86c1gNT1liuicmVAfORO7\\nDYvrnvfGj8A190Rhc/5IKcOBWFyGjHewrFAsLfYjl7+6PlhKyqm8R2ZSk7CAJu7d\\nrsYkpN8PAgMBAAECggEAViJTpa0BkuCGISNURXtqT7nkGPY/HIJbsVH/hrzEgFCV\\nt29uDdtT71LwcME5+fOPBt9SGFxZj02uOkaSyZJZsu4WqTHoa1ohVjUsXo8kUFnC\\nlHzL+zXadlixLKWztn01jdYkr9NAMkeT89J+c8pAEZ+u+ogFPyOF4vpLduiE7K2J\\nkIlTq+J2vOn6W11pWuHr+ONPVsdn59GIbf0lv8HSCumaC6rUh8VbnQ6FRxcCDbnO\\nQPlJpj0EU6zrD/7z3t/oIl6C5qXz38QIHIdnIBvs2/eU9kqq1gzy81H6QS9Vhqw6\\nKAFnBSQd8btOdFQvLk6z824IlDZOafTaNUrGAEzo1QKBgQD5m5rz57ai8HBDsqi2\\nqOK2Hj6BxWc5avGc0jx5chWgvYTG9zud3t8kr/bPhE9nqr3x2o+H2ZyzyILCcWBf\\nQQmUUtYnKWe1q55tJ7BLnz5ByMRFwy2kNw5Pp4LY1L2k7onMVudD2baUMPJc31dI\\nYMkMHI+aQX3cYMjnOpp61yS8cwKBgQC880U61Kw6RVvo0rKNb1C/6XIkmnhq34DZ\\nuMkiiccr+EDfcKEs14/DF04kKB6WkjQe/59tzUnw7bzJ/zBq5wGX2ehqkMJNd5pN\\nAX63NLqJCMYT0kRWhfG5RP6dJbI3x5XqELA9al1SomyBClhUiI0IXq/ylL5dG7Ft\\neF5wEF0n9QKBgQCvGGXRVSk8Ebhe9PP+9mfa40pr1CM+FvQYUy5S7yGW2XtL62Cp\\ntQ8JeFqFZcYh7ZdDElN/M7sGLtDzP38gMspafuV1IUl8GkCPR7kWw0Vz9jcgzPK2\\ncFycqeBS5KGIEkEd05R1d0Lpn5BUb+OVhTdjRKHDzs9QiaBE/Eojg8pkWwKBgHVn\\nLr/0PyNhz07mA/2vidwE4GBv/pxhTX16vLcSJshiU2TCZdMoCXKt+2ap6v+hznLo\\nYBZotSXXgjN8tYfnC21f/3Kfiat6wkxQvnx1beYRponQX5fnWB/HB/F657aS88ph\\nHjC680uSEptHY0T7J65oryiqVXIi7+bWIM++yzM1AoGADNCltAh8a9lfFrPIlh6E\\nQblVML6g6gUcZeOlPeHVJncTvPtwtg5Rl/PFzRE/b9/cDEgWG10LSIyfqyUaRfNo\\n0IL9QI4yk1R4mw0xC6vnjN7JagwSs4HcdR5NH0tdNDjY2oix5mlgx+qsqr1xZcxv\\nPhLJQW7t0mv08HgqY85m5TI=\\n-----END PRIVATE KEY-----\\n\"; // const CLIENT_EMAIL = process.env.REACT_APP_GOOGLE_CLIENT_EMAIL;\n  // const PRIVATE_KEY = process.env.REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY;\n\n  useEffect(() => {\n    if (selectedItem !== null) {\n      var _s = $RefreshSig$();\n\n      const date = new Date().toLocaleString('en-US', {\n        timeZone: 'Asia/Kolkata'\n      });\n      const spinIndex = selectedItem - 2 >= 0 ? selectedItem - 2 : items.length - 1 - selectedItem - 1; // console.log(selectedItem);\n      // console.log(items[spinIndex]);\n\n      setResult(items[spinIndex]);\n      const newRow = {\n        web_client: \"nads pwa\",\n        timestamp: date,\n        spin_result_index: spinIndex\n      };\n      const doc = new GoogleSpreadsheet(SPREADSHEET_ID);\n\n      const appendSpreadsheet = async newRow => {\n        _s();\n\n        try {\n          await doc.useServiceAccountAuth({\n            client_email: CLIENT_EMAIL,\n            private_key: PRIVATE_KEY\n          }); // loads document properties and worksheets\n\n          await doc.loadInfo();\n          const sheet = doc.sheetsById[SHEET_ID];\n          const result = await sheet.addRow(newRow);\n          console.log(newRow, items[spinIndex]);\n        } catch (e) {\n          console.error('Error: ', e);\n        }\n      };\n\n      _s(appendSpreadsheet, \"XzZzjmf42T4ghIIVsLcPZIIQRXQ=\", false, function () {\n        return [doc.useServiceAccountAuth];\n      });\n\n      appendSpreadsheet(newRow);\n    }\n  }, [selectedItem]);\n  useEffect(() => {\n    dragRotate();\n  }, []);\n\n  const dragRotate = () => {\n    var init,\n        rotate,\n        start,\n        stop,\n        active = false,\n        angle = 0,\n        rotation = 0,\n        startAngle = 0,\n        center = {\n      x: 0,\n      y: 0\n    },\n        R2D = 180 / Math.PI,\n        d = document.getElementById(\"draggable\"),\n        rot = document.getElementById(\"rotate\");\n\n    init = function () {\n      rot.addEventListener(\"mousedown\", start, false);\n      d.addEventListener(\"mousemove\", function (event) {\n        if (active === true) {\n          event.preventDefault();\n          rotate(event);\n        }\n      });\n      d.addEventListener(\"mouseup\", function (event) {\n        event.preventDefault();\n        stop(event);\n      });\n    };\n\n    start = function (e) {\n      e.preventDefault();\n      var bb = this.getBoundingClientRect(),\n          t = bb.top,\n          l = bb.left,\n          h = bb.height,\n          w = bb.width,\n          x,\n          y;\n      center = {\n        x: l + w / 2,\n        y: t + h / 2\n      };\n      x = e.clientX - center.x;\n      y = e.clientY - center.y;\n      startAngle = R2D * Math.atan2(y, x);\n      return active = true;\n    };\n\n    rotate = function (e) {\n      e.preventDefault();\n      var x = e.clientX - center.x,\n          y = e.clientY - center.y,\n          deg = R2D * Math.atan2(y, x);\n      rotation = deg - startAngle;\n      console.log(angle + rotation);\n      return rot.style.transform = `rotate(${angle + rotation}deg)`;\n    };\n\n    stop = function () {\n      angle += rotation;\n      return active = false;\n    };\n\n    init();\n  };\n\n  const wheelVars = {\n    '--nb-item': items.length,\n    '--selected-item': selectedItem\n  };\n\n  const handleItem = () => {\n    setSelectedItem(Math.floor(Math.random() * items.length));\n    document.querySelector(\".wheelPin\").classList.add(\"wheelPin-tilted\");\n    setInterval(() => {\n      document.querySelector(\".wheelPin\").classList.remove(\"wheelPin-tilted\");\n    }, 4000);\n    document.querySelector(\".animation-bar\").classList.add(\"animation-progress\");\n    setInterval(() => {\n      document.querySelector(\".animation-bar\").classList.remove(\"animation-progress\");\n    }, 4000);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-column main\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-column spin-wheel\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: wheelPin,\n          alt: \"wheelPin\",\n          className: \"wheelPin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"wheel-container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"draggable\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"rotate\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `wheel ${spinning}`,\n                style: wheelVars,\n                onClick: handleItem,\n                children: items.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"wheel-item\",\n                  style: {\n                    '--item-nb': index\n                  },\n                  children: item\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 13\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n        width: \"161\",\n        height: \"31\",\n        viewBox: \"0 0 161 31\",\n        xmlns: \"http://www.w3.org/2000/svg\",\n        children: /*#__PURE__*/_jsxDEV(\"path\", {\n          className: \"bar\",\n          d: \"M130.5 8.5C66.5 30.5 17.3333 12.3333 0 2.5C26 35.7 101.5 32.8333 136 23L140.5 31L161 2.5L126 0L130.5 8.5Z\",\n          fill: \"#BBBBBB\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"animation-bar\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            width: '60%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-column info\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Welcome to Blackcart Fate\\u2122\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 12\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Spin the wheel to decide your\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n\n_s2(Spinner, \"TubU/qkOXiO5NZoVqyzeI2sV0CI=\");\n\n_c = Spinner;\nexport default Spinner;\n\nvar _c;\n\n$RefreshReg$(_c, \"Spinner\");","map":{"version":3,"sources":["/Users/charanguru/projects/spin-wheel/src/components/Spinner.js"],"names":["React","useEffect","useState","GoogleSpreadsheet","Spinner","items","selectedItem","setSelectedItem","spinning","result","setResult","SPREADSHEET_ID","process","env","REACT_APP_SPREADSHEET_ID","SHEET_ID","REACT_APP_SHEET_ID","CLIENT_EMAIL","PRIVATE_KEY","date","Date","toLocaleString","timeZone","spinIndex","length","newRow","web_client","timestamp","spin_result_index","doc","appendSpreadsheet","useServiceAccountAuth","client_email","private_key","loadInfo","sheet","sheetsById","addRow","console","log","e","error","dragRotate","init","rotate","start","stop","active","angle","rotation","startAngle","center","x","y","R2D","Math","PI","d","document","getElementById","rot","addEventListener","event","preventDefault","bb","getBoundingClientRect","t","top","l","left","h","height","w","width","clientX","clientY","atan2","deg","style","transform","wheelVars","handleItem","floor","random","querySelector","classList","add","setInterval","remove","wheelPin","map","item","index"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-vars */\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useState } from 'react'\nimport { GoogleSpreadsheet } from \"google-spreadsheet\";\nimport wheelPin from \"../assets/pin.svg\";\n// import spin from \"../assets/spin.svg\";\n\nexport const Spinner = ({ items }) => {\n    const [selectedItem, setSelectedItem] = useState(null);\n    const spinning = selectedItem !== null ? 'spinning' : '';\n    const [result, setResult] = useState('');\n \n\n// Config variables\nconst SPREADSHEET_ID = process.env.REACT_APP_SPREADSHEET_ID;\nconst SHEET_ID = process.env.REACT_APP_SHEET_ID;\nconst CLIENT_EMAIL = 'fampay@fampay-305208.iam.gserviceaccount.com';\nconst PRIVATE_KEY = \"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC4O3f/gRC0au9k\\nRpx0DDaVh8MqlXqnIu34tBtCj+yoshPo93PqNIJXviCoLrXWtts6sTmb4uQDHk/h\\noMmW7eJxSHaZ2DO+kY6zhvVOvtwKSz6AVdN1tRhYBU9LqEJflH0h7l33yVvYpXJe\\nwdzAuKSxGzRf9OcblPtJrf/zmeJkR0MEnwYlJVsfWpDEO+UdGn/Zhd222+zjjip+\\nBKAbMKLB8TiD5pGcjYVqMBrXrnT8HTb+t0A1Jk31t/y86c1gNT1liuicmVAfORO7\\nDYvrnvfGj8A190Rhc/5IKcOBWFyGjHewrFAsLfYjl7+6PlhKyqm8R2ZSk7CAJu7d\\nrsYkpN8PAgMBAAECggEAViJTpa0BkuCGISNURXtqT7nkGPY/HIJbsVH/hrzEgFCV\\nt29uDdtT71LwcME5+fOPBt9SGFxZj02uOkaSyZJZsu4WqTHoa1ohVjUsXo8kUFnC\\nlHzL+zXadlixLKWztn01jdYkr9NAMkeT89J+c8pAEZ+u+ogFPyOF4vpLduiE7K2J\\nkIlTq+J2vOn6W11pWuHr+ONPVsdn59GIbf0lv8HSCumaC6rUh8VbnQ6FRxcCDbnO\\nQPlJpj0EU6zrD/7z3t/oIl6C5qXz38QIHIdnIBvs2/eU9kqq1gzy81H6QS9Vhqw6\\nKAFnBSQd8btOdFQvLk6z824IlDZOafTaNUrGAEzo1QKBgQD5m5rz57ai8HBDsqi2\\nqOK2Hj6BxWc5avGc0jx5chWgvYTG9zud3t8kr/bPhE9nqr3x2o+H2ZyzyILCcWBf\\nQQmUUtYnKWe1q55tJ7BLnz5ByMRFwy2kNw5Pp4LY1L2k7onMVudD2baUMPJc31dI\\nYMkMHI+aQX3cYMjnOpp61yS8cwKBgQC880U61Kw6RVvo0rKNb1C/6XIkmnhq34DZ\\nuMkiiccr+EDfcKEs14/DF04kKB6WkjQe/59tzUnw7bzJ/zBq5wGX2ehqkMJNd5pN\\nAX63NLqJCMYT0kRWhfG5RP6dJbI3x5XqELA9al1SomyBClhUiI0IXq/ylL5dG7Ft\\neF5wEF0n9QKBgQCvGGXRVSk8Ebhe9PP+9mfa40pr1CM+FvQYUy5S7yGW2XtL62Cp\\ntQ8JeFqFZcYh7ZdDElN/M7sGLtDzP38gMspafuV1IUl8GkCPR7kWw0Vz9jcgzPK2\\ncFycqeBS5KGIEkEd05R1d0Lpn5BUb+OVhTdjRKHDzs9QiaBE/Eojg8pkWwKBgHVn\\nLr/0PyNhz07mA/2vidwE4GBv/pxhTX16vLcSJshiU2TCZdMoCXKt+2ap6v+hznLo\\nYBZotSXXgjN8tYfnC21f/3Kfiat6wkxQvnx1beYRponQX5fnWB/HB/F657aS88ph\\nHjC680uSEptHY0T7J65oryiqVXIi7+bWIM++yzM1AoGADNCltAh8a9lfFrPIlh6E\\nQblVML6g6gUcZeOlPeHVJncTvPtwtg5Rl/PFzRE/b9/cDEgWG10LSIyfqyUaRfNo\\n0IL9QI4yk1R4mw0xC6vnjN7JagwSs4HcdR5NH0tdNDjY2oix5mlgx+qsqr1xZcxv\\nPhLJQW7t0mv08HgqY85m5TI=\\n-----END PRIVATE KEY-----\\n\";\n\n// const CLIENT_EMAIL = process.env.REACT_APP_GOOGLE_CLIENT_EMAIL;\n// const PRIVATE_KEY = process.env.REACT_APP_GOOGLE_SERVICE_PRIVATE_KEY;\n\nuseEffect(() => {\n    if(selectedItem !== null) {\n        const date = new Date().toLocaleString('en-US', { timeZone: 'Asia/Kolkata' });\n        const spinIndex = selectedItem-2 >= 0 ? selectedItem-2 : items.length - 1 - selectedItem  - 1;\n        // console.log(selectedItem);\n        // console.log(items[spinIndex]);\n        setResult(items[spinIndex])\n        const newRow = { web_client: \"nads pwa\", timestamp: date, spin_result_index: spinIndex };\n        const doc = new GoogleSpreadsheet(SPREADSHEET_ID);\n        const appendSpreadsheet = async (newRow) => {\n            try {\n              await doc.useServiceAccountAuth({\n                client_email: CLIENT_EMAIL,\n                private_key: PRIVATE_KEY,\n              });\n              // loads document properties and worksheets\n              await doc.loadInfo();\n          \n              const sheet = doc.sheetsById[SHEET_ID];\n              const result = await sheet.addRow(newRow);\n              console.log(newRow, items[spinIndex]);\n            } catch (e) {\n              console.error('Error: ', e);\n            }\n          };\n          appendSpreadsheet(newRow);\n    }\n}, [selectedItem])\n\nuseEffect(() => {\n    dragRotate();\n  }, []);\n\nconst dragRotate = () => {\n    var init,\n      rotate,\n      start,\n      stop,\n      active = false,\n      angle = 0,\n      rotation = 0,\n      startAngle = 0,\n      center = {\n        x: 0,\n        y: 0,\n      },\n      R2D = 180 / Math.PI,\n      d = document.getElementById(\"draggable\"),\n      rot = document.getElementById(\"rotate\");\n  \n    init = function () {\n      rot.addEventListener(\"mousedown\", start, false);\n      d.addEventListener(\"mousemove\", function (event) {\n        if (active === true) {\n          event.preventDefault();\n          rotate(event);\n        }\n      });\n      d.addEventListener(\"mouseup\", function (event) {\n        event.preventDefault();\n        stop(event);\n      });\n    };\n  \n    start = function (e) {\n      e.preventDefault();\n      var bb = this.getBoundingClientRect(),\n        t = bb.top,\n        l = bb.left,\n        h = bb.height,\n        w = bb.width,\n        x,\n        y;\n      center = {\n        x: l + w / 2,\n        y: t + h / 2,\n      };\n      x = e.clientX - center.x;\n      y = e.clientY - center.y;\n      startAngle = R2D * Math.atan2(y, x);\n      return (active = true);\n    };\n  \n    rotate = function (e) {\n      e.preventDefault();\n      var x = e.clientX - center.x,\n        y = e.clientY - center.y,\n        deg = R2D * Math.atan2(y, x);\n      rotation = deg - startAngle;\n      console.log(angle + rotation);\n      return (rot.style.transform = `rotate(${angle + rotation}deg)`);\n    };\n  \n    stop = function () {\n      angle += rotation;\n      return (active = false);\n    };\n  \n    init();\n  };\n\n\n    const wheelVars = {\n        '--nb-item': items.length,\n        '--selected-item': selectedItem,\n      };\n    const handleItem = () => {\n        setSelectedItem(Math.floor(Math.random() * items.length));\n        document.querySelector(\".wheelPin\").classList.add(\"wheelPin-tilted\");\n        setInterval(() => {\n          document.querySelector(\".wheelPin\").classList.remove(\"wheelPin-tilted\");\n        }, 4000);\n        document.querySelector(\".animation-bar\").classList.add(\"animation-progress\");\n        setInterval(() => {\n          document.querySelector(\".animation-bar\").classList.remove(\"animation-progress\");\n        }, 4000);\n      }\n    return (\n        <>\n        {/* <div className=\"wheel-top\">\n            <div className=\"wheel-upper\"></div>\n            <div className=\"wheel-triangle\"></div>\n        </div> */}\n        <div className=\"flex-column main\">\n        <div className=\"flex-column spin-wheel\">\n        <img src={wheelPin} alt=\"wheelPin\" className=\"wheelPin\"/>\n        <div className=\"wheel-container\">\n        <div id=\"draggable\">\n        <div id=\"rotate\">\n        <div className={`wheel ${spinning}`} style={wheelVars} onClick={handleItem}>\n          {items.map((item, index) => (\n            <div className=\"wheel-item\" key={index} style={{ '--item-nb': index }}>\n              {item}\n            </div>\n          ))}\n        </div>\n        </div>\n        </div>\n        </div>\n        </div>\n        <svg width=\"161\" height=\"31\" viewBox=\"0 0 161 31\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path className=\"bar\" d=\"M130.5 8.5C66.5 30.5 17.3333 12.3333 0 2.5C26 35.7 101.5 32.8333 136 23L140.5 31L161 2.5L126 0L130.5 8.5Z\" fill=\"#BBBBBB\"/>\n        </svg>\n        <div class=\"animation-bar\">\n            <span style={{width:'60%'}}></span>\n          </div>\n        {/* <div className=\"result-info\">\n        <p><b>And you've got {result}</b></p>\n        </div> */}\n        <div className=\"flex-column info\">\n        <p><b>Welcome to Blackcart Fateâ„¢</b></p>\n        <p>Spin the wheel to decide your</p>\n      </div>\n      </div>\n      </>\n    )\n}\n\nexport default Spinner;\n"]},"metadata":{},"sourceType":"module"}